apiVersion: hydra.ory.sh/v1alpha1
kind: OAuth2Client
metadata:
  name: matrix
  namespace: {{ .Release.Namespace }}
  annotations:
    helm.sh/hook: pre-install
    helm.sh/hook-weight: "-10"
spec:
  grantTypes:
  - authorization_code
  responseTypes:
  - code
  scope: "openid profile"
  secretName: {{ .Values.oauth2.secretName }}
  redirectUris:
  - https://{{ .Values.subdomain }}.{{ .Values.domain }}/_synapse/client/oidc/callback
  hydraAdmin:
    url: {{ .Values.oauth2.hydraAdmin }}
    port: 80
    endpoint: /admin/clients
    forwardedProto: https
